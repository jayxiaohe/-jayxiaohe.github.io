---
title: 'LeetCode-994 è…çƒ‚çš„æ©˜å­'
date: 2020-03-09 22:27:47
permalink: /40algo/10array/lc94/
order: 15
icon: leetcode
---
## ğŸ”— é“¾æ¥
[LeetCode-994](https://leetcode-cn.com/problems/rotting-oranges/)
ä¸€é“ç»å…¸çš„DFS/BFSé¢˜ã€‚ç”±äºå…¬å¸ä¹‹å‰æœ‰ç»„ç»‡åŸ¹è®­åŠè€ƒè¯•ï¼Œè¿™ç±»é¢˜å·²ç»å¿«åšåäº†ã€‚åœ¨æ­¤æ€»ç»“ä¸€ä¸‹ã€‚
ï¼ˆå› ä¸ºç–«æƒ…å’Œå·¥ä½œä¸Šçš„äº‹æƒ…ï¼Œå¾ˆä¹…æ²¡å†™æ€»ç»“äº†ğŸ˜ªï¼‰

<br/>

## ğŸ“‹ ä»£ç 1-DFS
æŒ‰æ·±åº¦ä¼˜å…ˆçš„æ–¹å¼è¿›è¡Œæ„ŸæŸ“ï¼Œæ¯èµ°ä¸€æ­¥ï¼Œè…çƒ‚å€¼+1ã€‚å®Œæˆåæ£€æŸ¥ç»“æœã€‚æœ€å¤§çš„è…çƒ‚å€¼-2å°±æ˜¯éœ€è¦çš„æ—¶é—´ã€‚
å¦‚æœè¿‡ç¨‹ä¸­é‡åˆ°äº†è…çƒ‚å€¼>å½“å‰è…çƒ‚å€¼+1çš„åœºæ™¯ï¼Œåˆ™æŠŠå¤§çš„è…çƒ‚å€¼æ›´æ–°ä¸ºå½“å‰è…çƒ‚å€¼+1ã€‚è¿™æ ·æ‰æ˜¯è¿™ä¸ªæ©˜å­æ„ŸæŸ“çš„æœ€çŸ­æ—¶é—´ã€‚
```java
class Solution {
    int time = 0;
    // è¿™2ä¸ªæ•°ç»„ç”¨åšä¸Šä¸‹å·¦å³4ä¸ªæ–¹å‘ã€‚
    int[] dx = {0, 0, 1, -1};
    int[] dy = {1, -1, 0, 0};
    int xx = 0;
    int yy = 0;
    
    public int orangesRotting(int[][] grid) {
        for(int i = 0; i < grid.length; i++) {
            for(int j = 0; j < grid[0].length; j++) {
                // éå†æ ¼å­ï¼Œå¦‚æœæ˜¯2ï¼ˆçƒ‚æ©˜å­ï¼‰ï¼Œè¿›å…¥dfsè¿›è¡Œé€’å½’ä¼ æŸ“ã€‚
                if (grid[i][j] == 2) {
                    dfs(grid, i, j, 2);
                }
            }
        }

        // ä¼ æŸ“å®Œæ¯•ã€‚æ£€æŸ¥ç»“æœã€‚å³grid[x][y]çš„æœ€å¤§å€¼ã€‚å¦å¤–ï¼Œå¦‚æœæ­¤æ—¶è¿˜æœ‰1ï¼Œè¯´æ˜è¿˜å­˜åœ¨æœªè…çƒ‚çš„æ©˜å­ã€‚è¿”å›-1ã€‚
        for(int i = 0; i < grid.length; i++) {
            for(int j = 0; j < grid[0].length; j++) {
                if (grid[i][j] == 1) return -1;
                if (grid[i][j] > time) {
                    time = grid[i][j];
                }
            }
        }
        // timeä¸ºæœ€å¤§çš„è…çƒ‚å€¼ã€‚å¦‚æœæ˜¯10ï¼Œè¯´æ˜ä»çƒ‚æ©˜å­ï¼ˆ2ï¼‰æ„ŸæŸ“åˆ°å®ƒéœ€è¦8ç§’ã€‚å› æ­¤éœ€è¦å‡å»2ã€‚
        return time-2 <0?0:time-2;
    }

    /**
     * @param grid è¾“å…¥çš„æ ¼å­
     * @param i æ¨ªåæ ‡
     * @param j çºµåæ ‡
     * @param k å½“å‰çš„è…çƒ‚å€¼ã€‚åˆå§‹ä¼ æ¥çš„æ˜¯2
     */
    private void dfs(int[][] grid, int i, int j, int k) {
        grid[i][j] = k;
        
        for (int d = 0; d < 4; d++) {
            xx = i + dx[d];
            yy = j + dy[d];
            //å¼€å§‹ä¼ æŸ“ã€‚æ¡ä»¶æ˜¯ï¼š
            //1.æ–°åæ ‡è¿˜åœ¨æ ¼å­é‡Œé¢
            //2.å³å°†ä¼ æŸ“çš„æ©˜å­æ˜¯å¥½æ©˜å­ï¼ˆå€¼ä¸º1ï¼‰ï¼Œæˆ–è…çƒ‚å€¼>=å½“å‰æ©˜å­çš„è…çƒ‚å€¼ã€‚
            // ä¸ºä»€ä¹ˆè¦åŠ ä¸Šä¸Šæ¡çš„æœ€åä¸€ä¸ªæ¡ä»¶å‘¢ï¼Ÿä¸¾ä¸ªä¾‹å­ã€‚å¦‚æœå³å°†ä¼ æŸ“çš„æ©˜å­è…çƒ‚å€¼æ˜¯4ï¼Œè¯´æ˜å¦ä¸€æ¡è·¯å¾„ï¼Œç»è¿‡4åˆ†é’Ÿåæ„ŸæŸ“äº†æ©˜å­ï¼›è€Œå½“å‰è¿™æ¡è·¯å¾„3åˆ†é’Ÿå³å¯æ„ŸæŸ“æ©˜å­ï¼Œé‚£è‚¯å®šæ˜¯ä»¥å°çš„ä¸ºå‡†ã€‚
            if (xx >=0 && xx < grid.length && yy >=0 && yy < grid[0].length && (grid[xx][yy] == 1 || grid[xx][yy] > k+1)) {
                dfs(grid, xx, yy, k+1);
            }
        }
    }
}
```
<br/>

## ğŸ“‹ ä»£ç 2-BFS
æŒ‰â€œå±‚â€è¿›è¡Œæ„ŸæŸ“ã€‚åœ¨åŒä¸€æ—¶é—´è¢«æ„ŸæŸ“çš„æ©˜å­ä¸ºä¸€å±‚ã€‚æœ€åçš„æœ€å¤§å±‚æ•°å°±æ˜¯éœ€è¦çš„æ—¶é—´ã€‚
```java
class Other {
	int time;
	int x, y;
	int xx, yy;
	int R, C;
	int code;	// ä¿å­˜å¤„ç†åçš„x.y
	int[] dx = {0,0,1,-1};
	int[] dy = {1,-1,0,0};
	
	Queue<Integer> queue = new LinkedList<Integer>();
	Map<Integer, Integer> depth = new HashMap<Integer, Integer>();
	
	public int orangesRotting(int[][] grid) {
		R = grid.length;
		C = grid[0].length;
		
		for(int i = 0; i < R; i++) {
			for(int j = 0; j < C; j++) {
				if (grid[i][j] == 2) {
					// iå’Œjçš„æœ€å¤§å€¼æ˜¯10, è¿™é‡ŒæŠŠjå­˜åˆ°codeçš„2ä¸ªä½ä½ï¼Œiå­˜åˆ°codeçš„é«˜ä½ã€‚
					code = i * 100 + j;
					queue.add(code);
					// è¿™ä¸ªcodeä»£è¡¨çš„æ ¼å­çš„æ„ŸæŸ“æ—¶é—´ä¸º0ã€‚
					depth.put(code, 0);
				}
			}
		}
		
		while (!queue.isEmpty()) {
			int code = queue.remove();
			x = code / 100;
			y = code % 100;

			for (int d = 0; d < 4; d++) {
				xx = x + dx[d];
				yy = y + dy[d];
				// å¦‚æœä¸‹ä¸€ä¸ªæ ¼å­åœ¨èŒƒå›´å†…ï¼Œè€Œä¸”æ˜¯æ–°é²œæ©˜å­
				if (0 <= xx && xx < R && 0 <= yy && yy < C && grid[xx][yy] == 1) {
					// å°±è¿›è¡Œæ„ŸæŸ“ï¼ŒæŠŠå€¼ç½®ä¸º2
					grid[xx][yy] = 2;
					// æœç”¨codeå˜é‡ï¼Œä¿å­˜æ–°æ ¼å­çš„åæ ‡ã€‚æ–°æ ¼å­ï¼Œå³ä¸Šé¢è¯´çš„ä¸‹ä¸€å±‚ã€‚
					int ncode = xx * 100 + yy;
					queue.add(ncode);
					// æ–°æ ¼å­ï¼ˆä¸‹ä¸€å±‚ï¼‰çš„è…çƒ‚æ—¶é—´ï¼Œæ˜¯æ„ŸæŸ“å®ƒçš„é‚£ä¸ªæ ¼å­çš„æ—¶é—´+1
					depth.put(ncode, depth.get(code) + 1);
					// timeä¿å­˜å½“å‰çš„æœ€å¤§æ—¶é—´
					time = depth.get(ncode);
				}
			}
		}
		
		// åˆ°è¿™é‡Œï¼Œtimeé‡Œå­˜çš„å°±æ˜¯æœ€å¤§æ—¶é—´ã€‚ä½†è¿˜éœ€è¦åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ–°é²œæ©˜å­ã€‚å¦‚æœå­˜åœ¨ï¼Œåˆ™è¿”å›-1ã€‚
		for (int[] row: grid) {
			for (int v: row) {
				if (v == 1)
					return -1;
			}
		}
		return time;
	}
}
```
<br/>

## ğŸ“‹ ä»£ç 3-DP
å¾…è¡¥å……ã€‚


<br/>

<center>End</center>

