import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,o as s,e as a}from"./app-BUJ2iQsf.js";const n={},t=a(`<h2 id="前置准备" tabindex="-1"><a class="header-anchor" href="#前置准备"><span>前置准备</span></a></h2><p>需要IDEA，JDK 1.8.20 以上。</p><h3 id="下载源码" tabindex="-1"><a class="header-anchor" href="#下载源码"><span>下载源码</span></a></h3><p>这里我们选择<code>4.3.x</code>版本。地址：<a href="https://github.com/spring-projects/spring-framework/tree/4.3.x" target="_blank" rel="noopener noreferrer">github - spring-framework 4.3.x</a></p><p>使用<code>git clone -b 4.3.x https://github.com/spring-projects/spring-framework.git</code>来下载这个版本。</p><p>下载完大约有<strong>453mb</strong>（如果下载缓慢，可以安装 <a href="https://github.com/docmirror/dev-sidecar" target="_blank" rel="noopener noreferrer">dev-sidecar</a>加速）。</p><h3 id="下载gradle构建工具" tabindex="-1"><a class="header-anchor" href="#下载gradle构建工具"><span>下载Gradle构建工具</span></a></h3><p>地址： <a href="https://gradle.org/releases/" target="_blank" rel="noopener noreferrer">Gradle 4.10.2</a>。</p><p>这个版本最好和源码<code>\\spring-framework\\gradle\\wrapper\\gradle-wrapper.properties</code>内的一致。进入官网后点击<code>4.10.2</code>版本下的<code>binary-only</code>即可。下载后解压zip包。</p><h3 id="修改distributionurl" tabindex="-1"><a class="header-anchor" href="#修改distributionurl"><span>修改distributionUrl</span></a></h3><p>打开 <code>spring-framework\\gradle\\wrapper\\gradle-wrapper.properties</code> 文件，注释掉<code>distributionUrl=https\\://services.gradle.org/distributions/gradle-4.10.2-bin.zip</code>，在下方新增一行：<code>distributionUrl=gradle-4.10.2-bin.zip</code>。并把刚才下载的gradle-4.10.2-bin.zip复制到该目录下。</p><h4 id="配置环境变量及仓库地址" tabindex="-1"><a class="header-anchor" href="#配置环境变量及仓库地址"><span>配置环境变量及仓库地址：</span></a></h4><ul><li>变量名：<code>GRADLE_HOME</code>，值：输入刚才解压后的路径。如 <code>D:\\0.devEnv\\gradle-4.10.2</code>。</li><li>变量名：<code>GRADLE_USER_HOME</code>，值：输入本地jar包存放路径即可。如<code>D:\\0.devEnv\\gradle-repo</code>。</li><li>然后在<code>path环境变量</code>内加一条：<code>%GRADLE_HOME%\\bin</code>。</li></ul><p>验证。打开cmd命令行输入 <code>gradle -v</code>。显示版本则表示配置成功。</p><h4 id="配置阿里云镜像" tabindex="-1"><a class="header-anchor" href="#配置阿里云镜像"><span>配置阿里云镜像：</span></a></h4><p>在gradle中的init.d文件夹中（如<code>D:\\0.devEnv\\gradle-4.10.2\\init.d\\</code>）新建一个<strong>init.gradle</strong>文件，并在文件中添加如下配置</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#393a34;--shiki-dark:#e1e4e8;--shiki-light-bg:#ffffff;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes vitesse-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#E1E4E8;">allprojects</span><span style="--shiki-light:#999999;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#E1E4E8;">    repositories</span><span style="--shiki-light:#999999;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#E1E4E8;">        maven</span><span style="--shiki-light:#999999;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#B07D48;--shiki-dark:#E1E4E8;"> url</span><span style="--shiki-light:#B5695977;--shiki-dark:#9ECBFF;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#9ECBFF;">https://maven.aliyun.com/repository/public/</span><span style="--shiki-light:#B5695977;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#B392F0;">        mavenLocal</span><span style="--shiki-light:#999999;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#B392F0;">        mavenCentral</span><span style="--shiki-light:#999999;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="修改spring源码内gradle的镜像地址" tabindex="-1"><a class="header-anchor" href="#修改spring源码内gradle的镜像地址"><span>修改spring源码内gradle的镜像地址</span></a></h3><p>修改<code>\\spring-framework\\build.gradle</code>文件内gradle的镜像地址。大约在132行，如下方代码所示，在<code>repositories</code>内，<code>mavenCentral()</code>前增加两行配置。</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" data-title="javascript" style="--shiki-light:#393a34;--shiki-dark:#e1e4e8;--shiki-light-bg:#ffffff;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes vitesse-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#E1E4E8;">repositories</span><span style="--shiki-light:#999999;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#E1E4E8;">    maven</span><span style="--shiki-light:#999999;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#B07D48;--shiki-dark:#E1E4E8;"> url</span><span style="--shiki-light:#B5695977;--shiki-dark:#9ECBFF;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#9ECBFF;">https://maven.aliyun.com/nexus/content/groups/public/</span><span style="--shiki-light:#B5695977;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line highlighted"><span style="--shiki-light:#B07D48;--shiki-dark:#E1E4E8;">    maven</span><span style="--shiki-light:#999999;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#B07D48;--shiki-dark:#E1E4E8;"> url</span><span style="--shiki-light:#B5695977;--shiki-dark:#9ECBFF;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#9ECBFF;">https://maven.aliyun.com/nexus/content/repositories/jcenter</span><span style="--shiki-light:#B5695977;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line highlighted"><span style="--shiki-light:#59873A;--shiki-dark:#B392F0;">    mavenCentral</span><span style="--shiki-light:#999999;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#E1E4E8;">    maven</span><span style="--shiki-light:#999999;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#B07D48;--shiki-dark:#E1E4E8;"> url</span><span style="--shiki-light:#B5695977;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#9ECBFF;">https://repo.spring.io/libs-spring-framework-build</span><span style="--shiki-light:#B5695977;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="编译compiletestjava模块" tabindex="-1"><a class="header-anchor" href="#编译compiletestjava模块"><span>编译compileTestJava模块</span></a></h2><p>打开源码所在文件夹，在搜索栏输入 cmd 命令，跳转到所在目录的命令行窗口，在当前目录的命令行窗口输入：</p><div class="language-bat line-numbers-mode" data-highlighter="shiki" data-ext="bat" data-title="bat" style="--shiki-light:#393a34;--shiki-dark:#e1e4e8;--shiki-light-bg:#ffffff;--shiki-dark-bg:#24292e;"><pre class="shiki shiki-themes vitesse-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#E1E4E8;">gradlew :spring-oxm:compileTestJava</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>稍等片刻即可编译成功。</p><h2 id="导入项目到idea" tabindex="-1"><a class="header-anchor" href="#导入项目到idea"><span>导入项目到IDEA</span></a></h2><p>使用Idea (File -&gt; New -&gt; Project from Existing Sources) ，选择<code>\\spring-framework</code>目录下的<code>build.gradle</code>文件，确认。接下来就是漫长的build了。这个过程中会下载相关的依赖包，大约<code>1.9GB</code>。时长主要取决于网速和本地磁盘性能。</p><p>最终，在IDEA的console里看到<code>BUILD SUCCESSFUL</code>，且IDEA没有正在运行的后台任务，表示导入成功。</p><h2 id="测试" tabindex="-1"><a class="header-anchor" href="#测试"><span>测试</span></a></h2><p>打开<code>spring-test</code>模块，<code>src/test/java</code>目录下，随便找一个<code>@Test</code>方法运行，查看结果是否正常。</p>`,29),r=[t];function l(p,d){return s(),e("div",null,r)}const c=i(n,[["render",l],["__file","index.html.vue"]]),g=JSON.parse('{"path":"/20frame/10.Spring/05.src/01/","title":"Spring源码下载和编译","lang":"zh-CN","frontmatter":{"title":"Spring源码下载和编译","date":"2021-05-22T16:34:27.000Z","permalink":"/20frame/10.Spring/05.src/01/","order":1,"icon":"wenzhang","description":"前置准备 需要IDEA，JDK 1.8.20 以上。 下载源码 这里我们选择4.3.x版本。地址：github - spring-framework 4.3.x 使用git clone -b 4.3.x https://github.com/spring-projects/spring-framework.git来下载这个版本。 下载完大约有453mb...","head":[["meta",{"property":"og:url","content":"https://i.iyes.life/20frame/10.Spring/05.src/01/"}],["meta",{"property":"og:site_name","content":"Mr.He"}],["meta",{"property":"og:title","content":"Spring源码下载和编译"}],["meta",{"property":"og:description","content":"前置准备 需要IDEA，JDK 1.8.20 以上。 下载源码 这里我们选择4.3.x版本。地址：github - spring-framework 4.3.x 使用git clone -b 4.3.x https://github.com/spring-projects/spring-framework.git来下载这个版本。 下载完大约有453mb..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-01-01T16:22:14.000Z"}],["meta",{"property":"article:author","content":"Mr.He"}],["meta",{"property":"article:published_time","content":"2021-05-22T16:34:27.000Z"}],["meta",{"property":"article:modified_time","content":"2023-01-01T16:22:14.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Spring源码下载和编译\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2021-05-22T16:34:27.000Z\\",\\"dateModified\\":\\"2023-01-01T16:22:14.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mr.He\\",\\"url\\":\\"https://i.iyes.life\\"}]}"]]},"headers":[{"level":2,"title":"前置准备","slug":"前置准备","link":"#前置准备","children":[{"level":3,"title":"下载源码","slug":"下载源码","link":"#下载源码","children":[]},{"level":3,"title":"下载Gradle构建工具","slug":"下载gradle构建工具","link":"#下载gradle构建工具","children":[]},{"level":3,"title":"修改distributionUrl","slug":"修改distributionurl","link":"#修改distributionurl","children":[]},{"level":3,"title":"修改spring源码内gradle的镜像地址","slug":"修改spring源码内gradle的镜像地址","link":"#修改spring源码内gradle的镜像地址","children":[]}]},{"level":2,"title":"编译compileTestJava模块","slug":"编译compiletestjava模块","link":"#编译compiletestjava模块","children":[]},{"level":2,"title":"导入项目到IDEA","slug":"导入项目到idea","link":"#导入项目到idea","children":[]},{"level":2,"title":"测试","slug":"测试","link":"#测试","children":[]}],"git":{"createdTime":1664722755000,"updatedTime":1672590134000,"contributors":[{"name":"jayxiaohe","email":"495302067@qq.com","commits":1}]},"readingTime":{"minutes":2.01,"words":604},"filePathRelative":"20frame/10.Spring/05.src/01.Spring源码下载和编译.md","localizedDate":"2021年5月23日","autoDesc":true}');export{c as comp,g as data};
