import{u as I,g as ae,h as te,i as U,j as le,P as re,t as se,k as oe,l as Q,m as B,n as ie,p as V,q as t,s as ne,R as _,v as ue,x as ce,y as ve,C as de,z as ge,A as me,B as pe,D as ye,E as he,F as q,G as fe,H as je,I as Ee,J as O,K as T,L as be}from"./app-BUJ2iQsf.js";const Ae=["/about","/intro.html","/","/01java/","/50tools/idea/","/50tools/navicat/","/50tools/linux/","/50tools/typora/","/50tools/md-enhance/","/50tools/maven/","/50tools/small-tools/","/50tools/net/","/50tools/front/","/50tools/","/20frame/","/40algo/50/","/40algo/03.zsd/","/40algo/110.slidewind/","/40algo/111.priority/","/40algo/120.dp/","/40algo/","/01java/10basic/interview/","/01java/10basic/","/01java/20coll/intro/","/01java/20coll/list/","/01java/20coll/map/","/01java/20coll/collections/","/01java/20coll/","/01java/30thread/intro/","/01java/30thread/interview/","/01java/30thread/","/01java/40jvm/interview/","/01java/40jvm/intro/","/01java/40jvm/engine/","/01java/40jvm/load/","/01java/40jvm/pcregister/","/01java/40jvm/stack/","/01java/40jvm/nativestack/","/01java/40jvm/method_area/","/01java/40jvm/instance/","/01java/40jvm/heap/","/01java/40jvm/gc/","/01java/40jvm/","/01java/java8/lambda/","/01java/java8/stream/","/01java/java8/date/","/01java/50.Java8/","/01java/55.utils/","/50tools/400.docker/cmd/","/50tools/400.docker/qa/","/50tools/400.docker/","/50tools/500.git/ops/","/50tools/500.git/","/20frame/10.Spring/interview/","/20frame/10.Spring/","/20frame/20.SpringMVC/interview/","/20frame/20.SpringMVC/","/20frame/30.SpringBoot/index/","/20frame/30.SpringBoot/sb01/","/20frame/30.SpringBoot/","/20frame/100.rabbitmq/intro/","/20frame/100.rabbitmq/hello/","/20frame/100.rabbitmq/sendRecv/","/20frame/100.rabbitmq/exchanges/","/20frame/100.rabbitmq/dead/","/20frame/100.rabbitmq/dealy/","/20frame/100.rabbitmq/propublish/","/20frame/100.rabbitmq/priority/","/20frame/100.rabbitmq/","/20frame/25.SpringSecurity/WebSecurityConfigurerAdapter/","/20frame/25.SpringSecurity/","/20frame/40.SpringCloud/index/","/20frame/40.SpringCloud/interview/","/20frame/40.SpringCloud/","/20frame/60.MyBatis/interview/","/20frame/60.MyBatis/mp01/","/20frame/60.MyBatis/","/20frame/70.Dubbo/01/","/20frame/70.Dubbo/","/40algo/10array/lc300/","/40algo/10array/lc674/","/40algo/10array/lc695/","/40algo/10array/lc945/","/40algo/10array/lc94/","/40algo/10array/lc2351/","/40algo/10array/","/40algo/20string/lc-m01.06/","/40algo/20string/lc2042/","/40algo/20string/","/40algo/30listnode/lc19/","/40algo/30listnode/lc206/","/40algo/30listnode/lc234/","/40algo/30listnode/","/40algo/50treenode/","/40algo/70others/lc365/","/40algo/70others/","/01java/55.utils/10.guava/1.part1/","/01java/55.utils/10.guava/","/20frame/10.Spring/05.src/01/","/20frame/10.Spring/05.src/","/20frame/40.SpringCloud/10.gateway/","/40algo/50treenode/10easy/lc572/","/40algo/50treenode/10easy/lc543/","/40algo/50treenode/10easy/it/","/40algo/50treenode/10easy/","/40algo/50treenode/50mid/lc98/","/40algo/50treenode/50mid/lc199/","/40algo/50treenode/50mid/lc236/","/40algo/50treenode/50mid/","/40algo/50treenode/90hard/","/404.html","/01java/java8/","/category/","/category/%E5%B7%A5%E5%85%B7/","/category/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","/category/java%E5%AE%B9%E5%99%A8/","/category/guava/","/tag/","/tag/idea/","/tag/%E8%BD%AF%E4%BB%B6/","/tag/navicat/","/tag/linux/","/tag/%E8%B5%84%E6%BA%90/","/tag/maven/","/tag/%E7%BD%91%E7%AB%99/","/tag/%E5%89%8D%E7%AB%AF/","/tag/%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3/","/tag/%E5%93%88%E5%B8%8C/","/tag/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/","/tag/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/","/tag/%E5%9F%BA%E7%A1%80/","/tag/collections/","/tag/%E5%AD%97%E7%AC%A6%E4%B8%B2/","/tag/joiner_splitter/","/article/","/star/","/timeline/"],Se="SEARCH_PRO_QUERY_HISTORY",h=I(Se,[]),Be=()=>{const{queryHistoryCount:l}=q,r=l>0;return{enabled:r,queryHistory:h,addQueryHistory:s=>{r&&(h.value=Array.from(new Set([s,...h.value.slice(0,l-1)])))},removeQueryHistory:s=>{h.value=[...h.value.slice(0,s),...h.value.slice(s+1)]}}},F=l=>Ae[l.id]+("anchor"in l?`#${l.anchor}`:""),qe="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:$}=q,f=I(qe,[]),we=()=>{const l=$>0;return{enabled:l,resultHistory:f,addResultHistory:r=>{if(l){const s={link:F(r),display:r.display};"header"in r&&(s.header=r.header),f.value=[s,...f.value.slice(0,$-1)]}},removeResultHistory:r=>{f.value=[...f.value.slice(0,r),...f.value.slice(r+1)]}}},He=l=>{const r=de(),s=U(),w=ge(),i=Q(0),b=B(()=>i.value>0),m=me([]);return pe(()=>{const{search:p,terminate:H}=ye(),j=he(c=>{const E=c.join(" "),{searchFilter:k=g=>g,splitWord:C,suggestionsFilter:L,...y}=r.value;E?(i.value+=1,p(c.join(" "),s.value,y).then(g=>k(g,E,s.value,w.value)).then(g=>{i.value-=1,m.value=g}).catch(g=>{console.warn(g),i.value-=1,i.value||(m.value=[])})):m.value=[]},q.searchDelay-q.suggestDelay);V([l,s],([c])=>j(c),{immediate:!0}),fe(()=>{H()})}),{isSearching:b,results:m}};var Ce=ae({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(l,{emit:r}){const s=te(),w=U(),i=le(re),{enabled:b,addQueryHistory:m,queryHistory:p,removeQueryHistory:H}=Be(),{enabled:j,resultHistory:c,addResultHistory:E,removeResultHistory:k}=we(),C=b||j,L=se(l,"queries"),{results:y,isSearching:g}=He(L),o=oe({isQuery:!0,index:0}),v=Q(0),d=Q(0),M=B(()=>C&&(p.value.length>0||c.value.length>0)),R=B(()=>y.value.length>0),x=B(()=>y.value[v.value]||null),Y=()=>{const{isQuery:e,index:a}=o;a===0?(o.isQuery=!e,o.index=e?c.value.length-1:p.value.length-1):o.index=a-1},z=()=>{const{isQuery:e,index:a}=o;a===(e?p.value.length-1:c.value.length-1)?(o.isQuery=!e,o.index=0):o.index=a+1},J=()=>{v.value=v.value>0?v.value-1:y.value.length-1,d.value=x.value.contents.length-1},G=()=>{v.value=v.value<y.value.length-1?v.value+1:0,d.value=0},K=()=>{d.value<x.value.contents.length-1?d.value+=1:G()},W=()=>{d.value>0?d.value-=1:J()},D=e=>e.map(a=>be(a)?a:t(a[0],a[1])),N=e=>{if(e.type==="customField"){const a=je[e.index]||"$content",[n,S=""]=Ee(a)?a[w.value].split("$content"):a.split("$content");return e.display.map(u=>t("div",D([n,...u,S])))}return e.display.map(a=>t("div",D(a)))},A=()=>{v.value=0,d.value=0,r("updateQuery",""),r("close")},X=()=>b?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},i.value.queryHistory),p.value.map((e,a)=>t("div",{class:["search-pro-result-item",{active:o.isQuery&&o.index===a}],onClick:()=>{r("updateQuery",e)}},[t(O,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},e),t("button",{class:"search-pro-remove-icon",innerHTML:T,onClick:n=>{n.preventDefault(),n.stopPropagation(),H(a)}})]))])):null,Z=()=>j?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},i.value.resultHistory),c.value.map((e,a)=>t(_,{to:e.link,class:["search-pro-result-item",{active:!o.isQuery&&o.index===a}],onClick:()=>{A()}},()=>[t(O,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[e.header?t("div",{class:"content-header"},e.header):null,t("div",e.display.map(n=>D(n)).flat())]),t("button",{class:"search-pro-remove-icon",innerHTML:T,onClick:n=>{n.preventDefault(),n.stopPropagation(),k(a)}})]))])):null;return ie("keydown",e=>{if(l.isFocusing){if(R.value){if(e.key==="ArrowUp")W();else if(e.key==="ArrowDown")K();else if(e.key==="Enter"){const a=x.value.contents[d.value];m(l.queries.join(" ")),E(a),s.push(F(a)),A()}}else if(j){if(e.key==="ArrowUp")Y();else if(e.key==="ArrowDown")z();else if(e.key==="Enter"){const{index:a}=o;o.isQuery?(r("updateQuery",p.value[a]),e.preventDefault()):(s.push(c.value[a].link),A())}}}}),V([v,d],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{class:["search-pro-result-wrapper",{empty:l.queries.length?!R.value:!M.value}],id:"search-pro-results"},l.queries.length?g.value?t(ne,{hint:i.value.searching}):R.value?t("ul",{class:"search-pro-result-list"},y.value.map(({title:e,contents:a},n)=>{const S=v.value===n;return t("li",{class:["search-pro-result-list-item",{active:S}]},[t("div",{class:"search-pro-result-title"},e||i.value.defaultTitle),a.map((u,ee)=>{const P=S&&d.value===ee;return t(_,{to:F(u),class:["search-pro-result-item",{active:P,"aria-selected":P}],onClick:()=>{m(l.queries.join(" ")),E(u),A()}},()=>[u.type==="text"?null:t(u.type==="title"?ue:u.type==="heading"?ce:ve,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[u.type==="text"&&u.header?t("div",{class:"content-header"},u.header):null,t("div",N(u))])])})])})):i.value.emptyResult:C?M.value?[X(),Z()]:i.value.emptyHistory:i.value.emptyResult)}});export{Ce as default};
